## 简介
这是一个Python的小程序啦。
数据来源是天天基金，感谢天天基金提供的API。
使用这个工具，需要有一点的python知识。

## 使用方法
### 初始化数据
首先定位到qa.py的下面代码，这些是关注的基金和代码，例如:
```
fund_codes = {
    "000478": "建信中证500",
    "002979": "广发中证全指金融地产联接C",
    "004598": "南方中证银行ETF联接C",
    "100032": "富国中证红利",
    "005918": "天弘沪深300",
}
```
进入控制台，执行：
```
python3 tools.py refresh
```

等待一段时间，同级目录下会生成“db_000478.json”等文件。这是最重要的原始数据。巧妇难为无米之炊，没有这个就没法画图。

首次执行，会进行历史数据的拉取。起始时间定义在tools.py的start_date中。
```
start_date = "2020-03-05"
```

### 刷新数据
如果同级目录下已经存在数据文件，执行：
```
python3 tools.py refresh
```
只会拉取增量数据，不用担心

### 进行定量分析
state_line.StateLine定义了一个抽象类，里面op方法留空。每一个stateLine对象，都是一条曲线。传入原始数据，并经过op方法，就会返回一条曲线的定义。

要实现自己的曲线，需要继承StateLine类，并实现自己的op方法。op方法会返回四个参数：x坐标数组，y坐标数组，颜色，标签。

本程序已经实现了valuation_line（净值曲线）, ma_line（均值曲线）。具体参考代码。

当实现了曲线，就可以在画板上进行分析了。具体上，参考qa.py文件。目前实现了在同一个画板画净值曲线，MA20，MA60。在源数据已经就绪的情况下，执行：
```
python3 qa.py
```
将会启动图形界面如下：
![](./example.png)

### DIY
有了这一套框架，就能实现各种各样的曲线进行定量分析啦。万里长征迈出了第一步。

祝大家玩的愉快。